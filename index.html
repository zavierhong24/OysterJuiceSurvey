<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>èšæ±æ¶ˆè´¹ä¸ä½¿ç”¨åå¥½è°ƒç ”</title>
    <style>
        /* ================= æ ·å¼åŒº ================= */
        :root {
            --primary: #D94436;
            --primary-bg: #FFF0F0;
            --gray-bg: #F7F8FA;
            --border: #E0E0E0;
            --text: #333;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--gray-bg);
            margin: 0; padding: 0;
            color: var(--text);
            padding-bottom: 120px;
        }

        /* å¤´éƒ¨ */
        .header {
            background: #D94436;
            padding: 30px 20px 40px;
            color: white;
            border-bottom-left-radius: 24px;
            border-bottom-right-radius: 24px;
        }
        .header h1 { margin: 0; font-size: 22px; font-weight: bold; }
        .header p { margin: 8px 0 0; font-size: 13px; opacity: 0.9; }

        .container { 
            max-width: 600px; 
            margin: -30px auto 0; 
            padding: 0 15px; 
            position: relative; 
            z-index: 10; /* ä¿è¯åœ¨æœ€ä¸Šå±‚ï¼Œå¯ç‚¹å‡» */
        }

        /* å¡ç‰‡ */
        .card {
            background: #fff;
            border-radius: 12px;
            padding: 18px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }
        .q-title {
            font-weight: 700; font-size: 16px; margin-bottom: 12px;
            line-height: 1.5; color: #000;
        }
        .q-tag {
            background: var(--primary-bg); color: var(--primary);
            font-size: 12px; padding: 2px 6px; border-radius: 4px;
            margin-right: 6px; font-weight: bold; vertical-align: middle;
        }

        /* æ ¸å¿ƒé€‰é¡¹æŒ‰é’® - å¼ºåˆ¶å¢åŠ ç‚¹å‡»åŒºåŸŸ */
        .btn-group { display: flex; flex-direction: column; gap: 10px; }
        .btn-option {
            padding: 14px 15px;
            background: #F9FAFB;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 15px;
            cursor: pointer;
            position: relative;
            line-height: 1.4;
            /* å…³é”®ï¼šç¡®ä¿ä¸è¢«é®æŒ¡ */
            z-index: 1; 
            user-select: none;
        }
        /* ç‚¹å‡»æ—¶çš„å³æ—¶åé¦ˆ */
        .btn-option:active { background: #EFEFEF; transform: scale(0.99); }
        
        /* é€‰ä¸­çŠ¶æ€ */
        .btn-option.selected {
            background: var(--primary-bg);
            border-color: var(--primary);
            color: var(--primary);
            font-weight: bold;
        }
        .btn-option.selected::after {
            content: 'âœ”'; position: absolute; right: 15px; top: 50%; transform: translateY(-50%);
        }

        /* å“ç‰Œæ¸¸æˆåŒº */
        .brand-slots { display: flex; gap: 8px; margin-bottom: 12px; }
        .brand-slot {
            flex: 1; height: 40px; border: 2px dashed #CCC;
            border-radius: 6px; display: flex; align-items: center; justify-content: center;
            font-size: 13px; color: #999; background: #FAFAFA;
        }
        .brand-slot.filled {
            background: #FFF0F0; border-color: #D94436; border-style: solid;
            color: #D94436; font-weight: bold;
        }
        .brand-pool { display: flex; flex-wrap: wrap; gap: 8px; }
        .brand-chip {
            padding: 8px 14px; background: white; border: 1px solid #DDD;
            border-radius: 20px; font-size: 14px; cursor: pointer;
        }
        .brand-chip.disabled { background: #EEE; color: #BBB; pointer-events: none; }

        /* æ’åºé¢˜æ ·å¼ */
        .sort-list { list-style: none; padding: 0; margin: 0; }
        .sort-item {
            background: white; border: 1px solid #EEE;
            padding: 12px; margin-bottom: 8px;
            border-radius: 8px; display: flex; align-items: center;
            justify-content: space-between;
        }
        .sort-num {
            background: #F0F0F0; width: 24px; height: 24px; border-radius: 50%;
            text-align: center; line-height: 24px; font-size: 12px; 
            margin-right: 10px; color: #666; font-weight: bold; flex-shrink: 0;
        }
        .sort-text { flex-grow: 1; font-size: 14px; padding-right: 5px; }
        .sort-actions { display: flex; align-items: center; gap: 5px; }
        .move-btn {
            width: 34px; height: 34px; border: 1px solid #EEE; background: #FFF;
            border-radius: 6px; color: #666; font-size: 18px; display: flex;
            align-items: center; justify-content: center; cursor: pointer; z-index: 2;
        }
        .move-btn:active { background: #DDD; }
        
        /* æäº¤æŒ‰é’® */
        .submit-btn {
            background: #D94436; color: white; width: 100%;
            padding: 16px; border: none; border-radius: 30px;
            font-size: 18px; font-weight: bold; margin-top: 20px;
            box-shadow: 0 6px 20px rgba(217, 68, 54, 0.3);
            cursor: pointer;
        }
        .hidden { display: none !important; }
        .section-title { font-size: 13px; color: #999; text-align: center; margin: 25px 0 15px; font-weight: bold; letter-spacing: 1px; }
        input.inline-input { border: none; border-bottom: 1px solid #ccc; background: transparent; outline: none; width: 120px; margin-left: 5px; font-size: 14px; }
    </style>
</head>
<body>

<div class="header">
    <h1>ğŸ¥˜ èšæ±/èšæ²¹æ¶ˆè´¹ä¸ä½¿ç”¨è°ƒç ”</h1>
    <p>é€‰é¡¹ç‚¹å‡»å³ç”Ÿæ•ˆï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒ</p>
</div>

<div class="container">
    <form id="surveyForm">

        <!-- ç¬¬1éƒ¨åˆ† -->
        <div class="section-title">01 / ç”¨æˆ·ç”»åƒä¸æ¶ˆè´¹åŸºç¡€</div>

        <!-- Q1 -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q1</span>æ‚¨çš„å¹´é¾„æ®µæ˜¯ï¼Ÿ</div>
            <div class="btn-group" id="group_q1">
                <div class="btn-option" onclick="selectSingle('q1', this)" data-val="18-25å²">18-25å²</div>
                <div class="btn-option" onclick="selectSingle('q1', this)" data-val="26-35å²">26-35å²</div>
                <div class="btn-option" onclick="selectSingle('q1', this)" data-val="36-45å²">36-45å²</div>
                <div class="btn-option" onclick="selectSingle('q1', this)" data-val="46-55å²">46-55å²</div>
                <div class="btn-option" onclick="selectSingle('q1', this)" data-val="56å²åŠä»¥ä¸Š">56å²åŠä»¥ä¸Š</div>
            </div>
            <input type="hidden" id="input_q1">
        </div>

        <!-- Q2 -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q2</span>å®¶ä¸­è°ä¹°è°ƒå‘³å“ï¼Ÿ</div>
            <div class="btn-group" id="group_q2">
                <div class="btn-option" onclick="selectSingle('q2', this)" data-val="è‡ªå·±">è‡ªå·±</div>
                <div class="btn-option" onclick="selectSingle('q2', this)" data-val="é…å¶/ä¼´ä¾£">é…å¶/ä¼´ä¾£</div>
                <div class="btn-option" onclick="selectSingle('q2', this)" data-val="çˆ¶æ¯">çˆ¶æ¯</div>
                <div class="btn-option" onclick="selectSingle('q2', this)" data-val="å…¶ä»–">å…¶ä»–</div>
            </div>
            <input type="hidden" id="input_q2">
        </div>

        <!-- Q3 æ²¿æµ· -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q3</span>æ˜¯å¦ä¸ºæ²¿æµ·åœ°åŒºï¼Ÿ<span style="font-size:12px;color:#999">ï¼ˆè‡³å¤šé€‰2é¡¹ï¼‰</span></div>
            <div class="btn-group" id="group_q3">
                <div class="btn-option" onclick="selectCoastal(this)" data-val="å¸¸ä½åœ°æ˜¯">å¸¸ä½åœ°æ˜¯æ²¿æµ·åœ°åŒº</div>
                <div class="btn-option" onclick="selectCoastal(this)" data-val="ç¥–ç±æ˜¯">ç¥–ç±æ˜¯æ²¿æµ·åœ°åŒº</div>
                <div class="btn-option" onclick="selectCoastal(this)" data-val="éƒ½ä¸æ˜¯">å¸¸ä½åœ°å’Œç¥–ç±éƒ½ä¸æ˜¯æ²¿æµ·åœ°åŒº</div>
            </div>
        </div>

        <!-- Q4 é¢‘ç‡ -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q4</span>ä½¿ç”¨é¢‘ç‡ï¼Ÿ</div>
            <div class="btn-group" id="group_q4">
                <div class="btn-option" onclick="selectFreq(this)" data-val="å‡ ä¹æ¯å¤©ä½¿ç”¨">å‡ ä¹æ¯å¤©ä½¿ç”¨</div>
                <div class="btn-option" onclick="selectFreq(this)" data-val="æ¯å‘¨å‡ æ¬¡">æ¯å‘¨å‡ æ¬¡</div>
                <div class="btn-option" onclick="selectFreq(this)" data-val="æ¯æœˆå‡ æ¬¡">æ¯æœˆå‡ æ¬¡</div>
                <div class="btn-option" onclick="selectFreq(this)" data-val="å¾ˆå°‘ä½¿ç”¨">å¾ˆå°‘ä½¿ç”¨</div>
                <div class="btn-option" onclick="selectFreq(this)" data-val="ä»ä¸ä½¿ç”¨">ä»ä¸ä½¿ç”¨</div>
            </div>
            <input type="hidden" id="input_q4">
        </div>

        <!-- Q4.2 åŸå›  -->
        <div class="card hidden" id="card_q4_2">
            <div class="q-title"><span class="q-tag">Q4.2</span>ä¸ç”¨èšæ²¹çš„åŸå› ï¼Ÿ<span style="font-size:12px;color:#999">ï¼ˆå¤šé€‰ï¼‰</span></div>
            <div class="btn-group" id="group_q4_2">
                <div class="btn-option" onclick="selectMulti(this)" data-val="æ§ç›">éœ€è¦æ§é’ ä½ç›é¥®é£Ÿ</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="å¿Œå£">å¿Œå£ï¼Œä¸å–œæ¬¢æµ·è…¥å‘³</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="æµ·é²œè¿‡æ•">æµ·é²œè¿‡æ•</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="æ·»åŠ å‰‚">ä¸å–œæ¬¢æ·»åŠ å‰‚</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="æ§ç³–">æ§ç³–æˆ–è€…ä½ç¢³æ°´</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="ä¸çŸ¥ç”¨æ³•">ä¸çŸ¥ç”¨æ³•/æ²¡å¿…è¦</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="è‰²æ·±">è‰²æ³½å¤ªæ·±</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="æ›¿ä»£å“">æœ‰å…¶ä»–æ›¿ä»£å“</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="å…¶ä»–">å…¶ä»–åŸå› </div>
            </div>
        </div>

        <!-- ç¬¬2éƒ¨åˆ† -->
        <div class="section-title">02 / å“ç‰Œè®¤çŸ¥ä¸è´­ä¹°è¡Œä¸º</div>

        <!-- Q5 å“ç‰Œå°è±¡ -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q5</span>å°è±¡æœ€æ·±çš„ä¸‰ä¸ªå“ç‰Œï¼Ÿ</div>
            <div class="brand-slots">
                <div class="brand-slot" id="slot_0" onclick="removeBrand(0)">ç¬¬ä¸€æåŠ</div>
                <div class="brand-slot" id="slot_1" onclick="removeBrand(1)">ç¬¬äºŒæåŠ</div>
                <div class="brand-slot" id="slot_2" onclick="removeBrand(2)">ç¬¬ä¸‰æåŠ</div>
            </div>
            <p style="font-size:12px; color:#999; margin:5px 0;">ğŸ‘‡ ç‚¹å‡»ä¸‹æ–¹é€‰æ‹©ï¼š</p>
            <div class="brand-pool">
                <div class="brand-chip" onclick="addBrand(this, 'æµ·å¤©')">æµ·å¤©</div>
                <div class="brand-chip" onclick="addBrand(this, 'æé”¦è®°')">æé”¦è®°</div>
                <div class="brand-chip" onclick="addBrand(this, 'å¨é‚¦')">å¨é‚¦</div>
                <div class="brand-chip" onclick="addBrand(this, 'åƒç¦¾')">åƒç¦¾</div>
                <div class="brand-chip" onclick="addBrand(this, 'æ—å°ç”Ÿ')">æ—å°ç”Ÿ</div>
                <div class="brand-chip" onclick="addBrand(this, 'é²èŠ±')">é²èŠ±</div>
                <div class="brand-chip" onclick="addBrand(this, 'æ¬£å’Œ')">æ¬£å’Œ</div>
                <div class="brand-chip" onclick="addBrand(this, 'æ²™äº•')">æ²™äº•</div>
                <div class="brand-chip" onclick="addBrand(this, 'è‡´ç¾æ–‹')">è‡´ç¾æ–‹</div>
                <div class="brand-chip" onclick="addBrand(this, 'å…¶ä»–')">å…¶ä»–</div>
            </div>
            <input type="text" id="q5_manual" class="hidden" placeholder="è¯·è¾“å…¥å…¶ä»–å“ç‰Œ" style="width:100%; margin-top:10px; border:1px solid #eee; padding:8px; box-sizing:border-box;">
        </div>

        <!-- Q6 æœ€è¿‘è´­ä¹° -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q6</span>æœ€è¿‘è´­ä¹°çš„å“ç‰Œï¼Ÿ</div>
            <div class="btn-group" id="group_q6">
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="æµ·å¤©">æµ·å¤©</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="æé”¦è®°">æé”¦è®°</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="å¨é‚¦">å¨é‚¦</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="åƒç¦¾">åƒç¦¾</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="æ—å°ç”Ÿ">æ—å°ç”Ÿ</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="æ²™äº•ä¹¡">æ²™äº•ä¹¡</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="é˜³æ±Ÿ">é˜³æ±Ÿ</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="è¿›å£">è¿›å£å“ç‰Œ</div>
                <div class="btn-option" onclick="selectSingle('q6', this)" data-val="å…¶ä»–">å…¶ä»– <input type="text" id="q6_other" class="inline-input" onclick="stopProp(event)"></div>
            </div>
            <input type="hidden" id="input_q6">
        </div>

        <!-- Q7 åŸå›  -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q7</span>è´­ä¹°åŸå› ï¼Ÿ<span style="font-size:12px;color:#999">ï¼ˆå¤šé€‰ï¼Œæœ€å¤š3é¡¹ï¼‰</span></div>
            <div class="btn-group" id="group_q7">
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="å“ç‰Œ">å“ç‰Œä¿¡èª‰å¥½</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="å£å‘³">å£å‘³/é²œå‘³å¥½</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="é…æ–¹">é…æ–¹çº¯å‡€/é›¶æ·»åŠ </div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="ä»·æ ¼">ä»·æ ¼å®æƒ </div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="æ¨è">äº²å‹æ¨è</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="ä¿ƒé”€">ä¿ƒé”€æ´»åŠ¨</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="åŒ…è£…">åŒ…è£…è®¾è®¡å¥½</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="å·¥è‰º">ä¼ ç»Ÿå·¥è‰ºï¼ˆéé—/å¤æ³•ï¼‰</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="æœ‰æœº">æœ‰æœº</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="å…¶ä»–">å…¶ä»– <input type="text" class="inline-input" onclick="stopProp(event)"></div>
            </div>
        </div>

        <!-- Q8 æ’åº -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q8</span>æœ€å…³æ³¨å› ç´ æ’åº</div>
            <div style="background:#F0F8FF; padding:10px; border-radius:6px; margin-bottom:10px; font-size:12px; color:#555;">
                ğŸ‘‡ <strong>è¯·ä½¿ç”¨å³ä¾§ç®­å¤´è°ƒæ•´é¡ºåºï¼š</strong>
            </div>
            
            <ul class="sort-list" id="sortList">
                <li class="sort-item" data-id="å£å‘³">
                    <div class="sort-num">1</div>
                    <div class="sort-text">å£å‘³ä¸é²œåº¦</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
                <li class="sort-item" data-id="èšæ±å«é‡">
                    <div class="sort-num">2</div>
                    <div class="sort-text">èšæ±å«é‡é«˜ä½</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
                <li class="sort-item" data-id="é›¶æ·»åŠ ">
                    <div class="sort-num">3</div>
                    <div class="sort-text">é…æ–™è¡¨æ¸…æ´(é›¶æ·»åŠ )</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
                <li class="sort-item" data-id="ä»·æ ¼">
                    <div class="sort-num">4</div>
                    <div class="sort-text">ä»·æ ¼</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
                <li class="sort-item" data-id="å“ç‰Œ">
                    <div class="sort-num">5</div>
                    <div class="sort-text">å“ç‰Œ</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
                <li class="sort-item" data-id="åŒ…è£…">
                    <div class="sort-num">6</div>
                    <div class="sort-text">åŒ…è£…ä¾¿åˆ©æ€§(æŒ¤æŒ¤è£…)</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
                <li class="sort-item" data-id="ä¿ƒé”€">
                    <div class="sort-num">7</div>
                    <div class="sort-text">ä¿ƒé”€åŠ›åº¦</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
                <li class="sort-item" data-id="é™„åŠ å€¼">
                    <div class="sort-num">8</div>
                    <div class="sort-text">é™„åŠ å€¼(éé—/æœ‰æœºç­‰)</div>
                    <div class="sort-actions">
                        <div class="move-btn" onclick="moveUp(this)">â†‘</div>
                        <div class="move-btn" onclick="moveDown(this)">â†“</div>
                    </div>
                </li>
            </ul>
        </div>

        <!-- ç¬¬3éƒ¨åˆ† -->
        <div class="section-title">03 / äº§å“ä½¿ç”¨ä¸åå¥½æµ‹è¯•</div>

        <!-- Q9 æ–°å‹èšæ²¹ -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q9</span>æœ€èƒ½æ¥å—çš„æ–°å‹èšæ²¹ï¼Ÿ</div>
            <div class="btn-group" id="group_q9">
                <div class="btn-option" onclick="selectSingle('q9', this)" data-val="100%èšæ±">ç¨€ä½†å¾ˆé²œç¾çš„100%èšæ±</div>
                <div class="btn-option" onclick="selectSingle('q9', this)" data-val="ä¼´é¦…èšæ²¹">ç¨ ä½†é†‡åšçš„ä¼´é¦…ç”¨èšæ²¹</div>
                <div class="btn-option" onclick="selectSingle('q9', this)" data-val="ç´ èšæ²¹">æ¾èŒ¸ç­‰ä¸ºåŸæ–™çš„ç´ èšæ²¹</div>
                <div class="btn-option" onclick="selectSingle('q9', this)" data-val="èšæ²¹é²œéœ²">å¤šé‡æ»‹å‘³çš„èšæ²¹é²œéœ²</div>
                <div class="btn-option" onclick="selectSingle('q9', this)" data-val="éƒ½ä¸å–œæ¬¢">éƒ½ä¸å–œæ¬¢</div>
            </div>
            <input type="hidden" id="input_q9">
        </div>

        <!-- Q10 è®¤çŸ¥ -->
        <div class="card">
            <div class="q-title">
                <span class="q-tag">Q10</span>
                æ˜¯å¦å¬è¯´æˆ–è´­ä¹°è¿‡ä¸»æ‰“ <span style="color:#D94436">â€œé«˜èšæ±å«é‡â€</span> æˆ– <span style="color:#D94436">â€œæ´å‡€é…æ–¹â€</span> çš„èšæ²¹ï¼Ÿ
            </div>
            <div style="background:#F9F9F9; padding:10px; border-radius:8px; margin-bottom:15px; border-left: 3px solid #D94436;">
                <p style="margin:0; font-size:12px; color:#666; line-height:1.5;">
                    ğŸ’¡ <strong>ä¾‹å¦‚ï¼šæ—å°ç”Ÿ</strong> ç­‰ã€‚<br>
                    æŒ‡èšæ±æ·»åŠ é‡é«˜ï¼Œæˆ–0æ·»åŠ é˜²è…å‰‚/å‘³ç²¾ç­‰ã€‚
                </p>
            </div>
            <div class="btn-group" id="group_q10">
                <div class="btn-option" onclick="selectQ10(this)" data-val="æ˜¯ï¼Œè´­ä¹°è¿‡">ğŸ›’ <strong>æ˜¯ï¼Œè´­ä¹°è¿‡</strong></div>
                <div class="btn-option" onclick="selectQ10(this)" data-val="æ˜¯ï¼Œå¬è¯´è¿‡">ğŸ‘‚ <strong>æ˜¯ï¼Œå¬è¯´è¿‡ä½†æœªè´­ä¹°è¿‡</strong></div>
                <div class="btn-option" onclick="selectQ10(this)" data-val="æ²¡å¬è¯´è¿‡">âŒ <strong>æ²¡å¬è¯´è¿‡</strong></div>
            </div>
            <input type="hidden" id="input_q10">
        </div>

        <!-- Q11 çœ‹æ³• -->
        <div class="card hidden" id="card_q11">
            <div class="q-title"><span class="q-tag">Q11</span>æ‚¨å¯¹è¿™ç±»äº§å“çš„çœ‹æ³•ï¼Ÿ<span style="font-size:12px;color:#999">ï¼ˆå¤šé€‰ï¼‰</span></div>
            <div class="btn-group" id="group_q11">
                <div class="btn-option" onclick="selectMulti(this)" data-val="æ„¿æ„ä»˜è´¹">æ„¿æ„ä¸ºå“è´¨/å¥åº·ä»˜è´¹</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="ä»·æ ¼åé«˜">æ„Ÿå…´è¶£ï¼Œä½†è§‰å¾—è´µ</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="å·®åˆ«ä¸å¤§">è®¤ä¸ºå·®åˆ«ä¸å¤§</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="ä¸ä¿¡ä»»">ä¸ä¿¡ä»»å®£ä¼ æ¦‚å¿µ</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="å…¶ä»–">å…¶ä»– <input type="text" class="inline-input" onclick="stopProp(event)"></div>
            </div>
        </div>

        <!-- Q12 ä»·æ ¼ -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q12</span>èƒ½æ¥å—çš„ä»·æ ¼(500g)ï¼Ÿ</div>
            <div class="btn-group" id="group_q12">
                <div class="btn-option" onclick="selectSingle('q12', this)" data-val="15å…ƒä»¥ä¸‹">15å…ƒä»¥ä¸‹</div>
                <div class="btn-option" onclick="selectSingle('q12', this)" data-val="16-25å…ƒ">16-25å…ƒ</div>
                <div class="btn-option" onclick="selectSingle('q12', this)" data-val="26-35å…ƒ">26-35å…ƒ</div>
                <div class="btn-option" onclick="selectSingle('q12', this)" data-val="36å…ƒä»¥ä¸Š">36å…ƒä»¥ä¸Š</div>
            </div>
            <input type="hidden" id="input_q12">
        </div>

        <!-- ç¬¬4éƒ¨åˆ† -->
        <div class="section-title">04 / æœªæ¥è¶‹åŠ¿ä¸ä¿¡æ¯è·å–</div>

        <!-- Q13 è¶‹åŠ¿ -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q13</span>æœªæ¥å…³æ³¨æ–¹å‘ï¼Ÿ<span style="font-size:12px;color:#999">ï¼ˆæœ€å¤š3é¡¹ï¼‰</span></div>
            <div class="btn-group" id="group_q13">
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="åŠŸèƒ½æ€§">åŠŸèƒ½æ€§(å‡ç›/æ— éº¸è´¨)</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="é«˜ç«¯åŒ–">é«˜ç«¯åŒ–(é«˜èšæ±/åŸäº§åœ°)</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="ä¾¿æ·æ€§">ä¾¿æ·æ€§(æŒ¤æŒ¤åŒ…/å°åŒ…è£…)</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="å¯æŒç»­">å¯æŒç»­(ç¯ä¿åŒ…è£…)</div>
                <div class="btn-option" onclick="selectMultiLimit(this, 3)" data-val="å£å‘³åˆ›æ–°">å£å‘³åˆ›æ–°(è¾£å‘³/è’œé¦™)</div>
            </div>
        </div>

        <!-- Q14 æ¸ é“ -->
        <div class="card">
            <div class="q-title"><span class="q-tag">Q14</span>äº†è§£æ¸ é“ï¼Ÿ<span style="font-size:12px;color:#999">ï¼ˆå¤šé€‰ï¼‰</span></div>
            <div class="btn-group" id="group_q14">
                <div class="btn-option" onclick="selectMulti(this)" data-val="ç”µå•†">ç”µå•†å¹³å°</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="çŸ­è§†é¢‘">çŸ­è§†é¢‘/ç›´æ’­</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="äº²å‹">äº²å‹å£ç¢‘æ¨è</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="çº¿ä¸‹å•†è¶…">çº¿ä¸‹å•†è¶…é™ˆåˆ—</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="å†œè´¸å¸‚åœº">å†œè´¸å¸‚åœºæ‘Š</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="åšä¸»">ç¾é£Ÿåšä¸»/è¯„æµ‹æ¨è</div>
                <div class="btn-option" onclick="selectMulti(this)" data-val="å…¶ä»–">å…¶ä»– <input type="text" class="inline-input" onclick="stopProp(event)"></div>
            </div>
        </div>

        <button type="button" class="submit-btn" onclick="submitData()" id="btnSubmit">æäº¤é—®å·</button>
        <div style="height: 50px;"></div>

    </form>
</div>

<!-- ================= è„šæœ¬åŒº ================= -->
<script src="https://cdn.bootcdn.net/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
<script src="https://unpkg.com/bmob-js-sdk-v4/dist/Bmob-4.0.0.min.js"></script>

<script>
    // 1. å®šä¹‰äº¤äº’å‡½æ•° (ç¡®ä¿UIé€»è¾‘å…ˆåŠ è½½)
    
    function stopProp(e) {
        if(e && e.stopPropagation) e.stopPropagation();
        else window.event.cancelBubble = true;
    }

    function selectSingle(qId, btn) {
        var group = btn.parentNode;
        var opts = group.querySelectorAll('.btn-option');
        for (var i = 0; i < opts.length; i++) {
            opts[i].classList.remove('selected');
        }
        btn.classList.add('selected');
        document.getElementById('input_' + qId).value = btn.getAttribute('data-val');
    }

    function selectMulti(btn) {
        btn.classList.toggle('selected');
    }

    function selectMultiLimit(btn, limit) {
        var group = btn.parentNode;
        var count = group.querySelectorAll('.selected').length;
        if (!btn.classList.contains('selected') && count >= limit) {
            alert('æœ€å¤šé€‰' + limit + 'é¡¹');
            return;
        }
        btn.classList.toggle('selected');
    }

    function selectCoastal(btn) {
        var val = btn.getAttribute('data-val');
        var group = btn.parentNode;
        var opts = group.querySelectorAll('.btn-option');
        
        if (val === 'éƒ½ä¸æ˜¯') {
            for(var i=0; i<opts.length; i++) opts[i].classList.remove('selected');
            btn.classList.add('selected');
        } else {
            // å–æ¶ˆâ€œéƒ½ä¸æ˜¯â€
            for(var i=0; i<opts.length; i++) {
                if(opts[i].getAttribute('data-val') === 'éƒ½ä¸æ˜¯') opts[i].classList.remove('selected');
            }
            // é™åˆ¶2ä¸ª
            var selCount = 0;
            for(var i=0; i<opts.length; i++) if(opts[i].classList.contains('selected')) selCount++;
            if (!btn.classList.contains('selected') && selCount >= 2) {
                alert('è‡³å¤šé€‰2é¡¹'); return;
            }
            btn.classList.toggle('selected');
        }
    }

    function selectFreq(btn) {
        selectSingle('q4', btn);
        var val = btn.getAttribute('data-val');
        var card = document.getElementById('card_q4_2');
        if (val === 'å¾ˆå°‘ä½¿ç”¨' || val === 'ä»ä¸ä½¿ç”¨') {
            card.classList.remove('hidden');
        } else {
            card.classList.add('hidden');
            var opts = card.querySelectorAll('.selected');
            for(var i=0; i<opts.length; i++) opts[i].classList.remove('selected');
        }
    }

    function selectQ10(btn) {
        selectSingle('q10', btn);
        var val = btn.getAttribute('data-val');
        var card = document.getElementById('card_q11');
        if (val !== 'æ²¡å¬è¯´è¿‡') {
            card.classList.remove('hidden');
        } else {
            card.classList.add('hidden');
            var opts = card.querySelectorAll('.selected');
            for(var i=0; i<opts.length; i++) opts[i].classList.remove('selected');
        }
    }

    // å“ç‰Œæ¸¸æˆ
    var pickedBrands = [null, null, null];
    function addBrand(btn, name) {
        if(btn.classList.contains('disabled')) return;
        var idx = pickedBrands.indexOf(null);
        if(idx === -1) { alert("åªèƒ½é€‰3ä¸ªï¼Œç‚¹å‡»ä¸Šæ–¹æ ¼å­å¯åˆ é™¤"); return; }
        pickedBrands[idx] = name;
        renderBrands();
        if(name === 'å…¶ä»–') document.getElementById('q5_manual').classList.remove('hidden');
    }
    function removeBrand(idx) {
        if(pickedBrands[idx] === 'å…¶ä»–') {
            document.getElementById('q5_manual').classList.add('hidden');
            document.getElementById('q5_manual').value = '';
        }
        pickedBrands[idx] = null;
        renderBrands();
    }
    function renderBrands() {
        for(var i=0; i<3; i++) {
            var el = document.getElementById('slot_'+i);
            if(pickedBrands[i]) {
                el.innerText = pickedBrands[i];
                el.classList.add('filled');
                el.innerHTML = pickedBrands[i] + ' <span style="font-size:10px">Ã—</span>';
            } else {
                el.innerText = ["ç¬¬ä¸€","ç¬¬äºŒ","ç¬¬ä¸‰"][i];
                el.classList.remove('filled');
            }
        }
    }

    // æ’åºé€»è¾‘ (ç®­å¤´ç§»åŠ¨)
    function moveUp(btn) {
        stopProp(window.event);
        var item = btn.parentNode.parentNode;
        var prev = item.previousElementSibling;
        if(prev) {
            item.parentNode.insertBefore(item, prev);
            updateSortNum();
        }
    }
    function moveDown(btn) {
        stopProp(window.event);
        var item = btn.parentNode.parentNode;
        var next = item.nextElementSibling;
        if(next) {
            item.parentNode.insertBefore(next, item);
            updateSortNum();
        }
    }
    function updateSortNum() {
        var items = document.querySelectorAll('.sort-num');
        for(var i=0; i<items.length; i++) items[i].innerText = (i+1);
    }

    // 2. åˆå§‹åŒ– Bmob (æ”¾åœ¨ try-catch ä¸­ï¼Œä¸å½±å“ UI)
    try {
        Bmob.initialize("70f9577e95b2858b", "1234567890123456"); 
        console.log("Bmob init ok");
    } catch(e) {
        console.error("Bmob fail", e);
    }
    
    // 3. å°è¯•åŠ è½½ Sortableï¼Œå¤±è´¥ä¹Ÿæ²¡å…³ç³»
    try {
        var el = document.getElementById('sortList');
        if(typeof Sortable !== 'undefined') {
            new Sortable(el, { animation: 150, handle: '.sort-handle', onEnd: updateSortNum });
        }
    } catch(e) {}

    // 4. æäº¤æ•°æ®
    function getMultiVals(gid) {
        var opts = document.querySelectorAll('#'+gid+' .selected');
        var arr = [];
        for(var i=0; i<opts.length; i++) {
            var v = opts[i].getAttribute('data-val');
            var inp = opts[i].querySelector('input');
            if(inp && inp.value) v += ":" + inp.value;
            arr.push(v);
        }
        return arr;
    }

    function submitData() {
        var btn = document.getElementById('btnSubmit');

        var q1 = document.getElementById('input_q1').value;
        var q2 = document.getElementById('input_q2').value;
        var q3 = getMultiVals('group_q3');
        var q4 = document.getElementById('input_q4').value;
        var q4_2 = getMultiVals('group_q4_2');
        
        var q5_arr = pickedBrands.filter(function(v){return v!=null});
        var q5 = q5_arr.join(',');
        if(pickedBrands.includes('å…¶ä»–')) q5 += "("+document.getElementById('q5_manual').value+")";

        var q6 = document.getElementById('input_q6').value;
        if(q6 === 'å…¶ä»–') q6 += ":" + document.getElementById('q6_other').value;

        var q7 = getMultiVals('group_q7');
        
        var q8 = [];
        var sItems = document.querySelectorAll('.sort-item');
        for(var i=0; i<sItems.length; i++) q8.push(sItems[i].getAttribute('data-id'));

        var q9 = document.getElementById('input_q9').value;
        var q10 = document.getElementById('input_q10').value;
        var q11 = getMultiVals('group_q11');
        var q12 = document.getElementById('input_q12').value;
        var q13 = getMultiVals('group_q13');
        var q14 = getMultiVals('group_q14');

        if(!q1 || !q2 || q3.length===0 || !q4) { alert("è¯·å¡«å†™åŸºç¡€ä¿¡æ¯(Q1-Q4)"); return; }
        if(q5_arr.length===0) { alert("è¯·é€‰æ‹©å“ç‰Œå°è±¡(Q5)"); return; }
        if(!q6) { alert("è¯·é€‰æ‹©æœ€è¿‘è´­ä¹°(Q6)"); return; }
        if(!q9) { alert("è¯·é€‰æ‹©æ–°å‹èšæ²¹(Q9)"); return; }
        if(!q10) { alert("è¯·å¡«å†™è®¤çŸ¥(Q10)"); return; }

        btn.innerText = "æäº¤ä¸­...";
        btn.disabled = true;

        var query = Bmob.Query('OysterJuiceSurvey');
        query.set("q1_age", q1);
        query.set("q2_role", q2);
        query.set("q3_coastal", q3);
        query.set("q4_freq", q4);
        query.set("q4_reason", q4_2);
        query.set("q5_recall", q5);
        query.set("q6_recent", q6);
        query.set("q7_why", q7);
        query.set("q8_rank", q8.join('>'));
        query.set("q9_pref", q9);
        query.set("q10_aware", q10);
        query.set("q11_opinion", q11);
        query.set("q12_price", q12);
        query.set("q13_trend", q13);
        query.set("q14_channel", q14);

        query.save().then(function(res){
            alert("âœ… æäº¤æˆåŠŸï¼");
            btn.innerText = "å·²å®Œæˆ";
        }).catch(function(err){
            alert("âŒ æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•");
            console.log(err);
            btn.disabled = false;
            btn.innerText = "é‡è¯•";
        });
    }
</script>

</body>
</html>
